<head>
    <title>iReport</title>
</head>

<template name="mainLayout">
    <body>
        <header>
            {{>Template.dynamic template=header}}
        </header>

        <main class="container">
            {{>Template.dynamic template=main}}
        </main>

        <footer class="page-footer">
            {{>Template.dynamic template=footer}}
        </footer>

        {{> sAlert}}
    </body>
</template>

<template name="nav">
    <nav>
        <div class="nav-wrapper container">
            <a href="/" class="brand-logo">iReport</a>
            <a data-activates="mobile-nav" class="button-collapse"><i class="material-icons">menu</i></a>
            <ul class="right hide-on-med-and-down">
                {{#if currentUser}}
                {{> dropdown_profile}}
                {{else}}
                <li class="{{isActiveRoute 'login'}}"><a href="/login">Login</a></li>
                {{/if}}
            </ul>
            <ul id="dropdown-profile" class="dropdown-content"> 
                <li><a href="/user">Meu perfil</a></li>
                <li><a href="/category">Categorias</a></li>
                <li class="divider"></li>
                <li><a href="/logout">Logout</a></li>
            </ul>
            <ul class="side-nav" id="mobile-nav">
                {{#if currentUser}}
                <li class="{{isActiveRoute 'report'}}"><a href="/report">Relatórios</a></li>
                <li class="{{isActiveRoute 'new_report'}}"><a href="/report/new">Novo relatório</a></li>
                <li class="divider"></li>
                <li><a href="/user">Meu perfil</a></li>
                <li><a href="/category">Categorias</a></li>
                <li><a href="/logout">Logout</a></li>
                {{else}}
                <li  class="{{isActiveRoute 'login'}}"><a href="/login">Login</a></li>
                {{/if}}
            </ul>
        </div>
    </nav>
</template>

<template name="dropdown_profile">
    <li class="{{isActiveRoute 'report'}}"><a href="/report"><i class="material-icons">description</i></a></li>
    <li class="{{isActiveRoute 'new_report'}}"><a href="/report/new"><i class="material-icons">note_add</i></a></li>
    <li><a class="dropdown-button" data-activates="dropdown-profile">@{{currentUser.profile.name}}<i class="material-icons right">arrow_drop_down</i></a></li>
</template>

<template name="footer">
<!--     <div class="container">
        <div class="row">
            <div class="col l6 s12">
                <h5 class="white-text">Footer Content</h5>
                <p class="grey-text text-lighten-4">You can use rows and columns here to organize your footer content.</p>
            </div>
            <div class="col l4 offset-l2 s12">
                <h5 class="white-text">Links</h5>
                <ul>
                    <li><a class="grey-text text-lighten-3" href="#!">Link 1</a></li>
                    <li><a class="grey-text text-lighten-3" href="#!">Link 2</a></li>
                    <li><a class="grey-text text-lighten-3" href="#!">Link 3</a></li>
                    <li><a class="grey-text text-lighten-3" href="#!">Link 4</a></li>
                </ul>
            </div>
        </div>
    </div> -->
    <div class="footer-copyright">
        <div class="container">
            © 2016 Rafael Franco
            <a class="grey-text text-lighten-4 right tooltipped" href="https://gitlab.com/u/rfoel" data-position="top" data-tooltip="GitLab"><i class="fa fa-gitlab fa-2x" aria-hidden="true"></i></a>
            <a class="grey-text text-lighten-4 right tooltipped" href="https://github.com/rfoel" data-position="top" data-tooltip="GitHub"><i class="fa fa-github fa-2x" aria-hidden="true"></i></a>
        </div>
    </div>
</template>

<template name="home">
    <p>This is the home page of our blog</p>
</template>

<template name="category">
    <nav class="z-depth-0 transparent black-text">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="/" class="breadcrumb">Home</a>
                <a href="/category" class="breadcrumb">Categorias</a>
            </div>
        </div>
    </nav>
    <div class="col s12">
        <div class="row">
            <h5 class="left">Categorias</h5>
            {{> category_options}}
        </div>
        <div class="row">
            {{#if category.count}}
            {{#each category}}
            {{> category_item}}
            {{/each}}
            {{else}}
            <h5>As categorias criadas aparecerão aqui!</h5>
            {{/if}}
        </div>
    </div>
</template>

<template name="category_deleted">
    <nav class="z-depth-0 transparent black-text">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="/" class="breadcrumb">Home</a>
                <a href="/category" class="breadcrumb">Categorias</a>
                <a href="/category/deleted" class="breadcrumb">Categorias removidas</a>
            </div>
        </div>
    </nav>
    <div class="col s12">
        <div class="row">
            <h5 class="left">Categorias removidas</h5>
            {{> category_options}}
        </div>
        <div class="row">
            {{#if category.count}}
            {{#each category}}
            {{> category_item}}
            {{/each}}
            {{else}}
            <h5>As categorias removidas aparecerão aqui!</h5>
            {{/if}}
        </div>
    </div>
</template>

<template name="category_item">
    <div id="{{_id}}" class="col s12 m6 l4">
        <div class="card">
            <div class="card-content">
                <span class="card-title activator grey-text text-darken-4">{{title}}<i class="material-icons right">more_vert</i></span>
            </div>
            <div class="card-reveal">
                <span class="card-title grey-text text-darken-4">{{title}}<i class="material-icons right">close</i><i id="edit" class="material-icons right">edit</i><i id="delete" class="material-icons right">delete</i><i id="restore" class="material-icons right">loop</i></span>
                <p class="model">{{model}}</p>
            </div>
        </div>
    </div>
</template>

<template name="new_category">
    <nav class="z-depth-0 transparent black-text">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="/" class="breadcrumb">Home</a>
                <a href="/category" class="breadcrumb">Categorias</a>
                <a href="/category/new" class="breadcrumb">Nova categoria</a>
            </div>
        </div>
    </nav>
    <div class="col s12 m12">
        <div class="row">
            <h5 class="left">Nova categoria</h5>
            {{> category_options}}
        </div>
        <form id="new-category" action="/category/new" method="post">
            <div class="row">                    
                <div class="input-field col s12 m6">
                    <input id="title" name="title" type="text" required>
                    <label for="title">Título</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12 m6">
                    <textarea id="model" class="materialize-textarea"></textarea>
                    <label for="model">Modelo</label>
                </div>
            </div>
            <div class="row">
                <button id="btn-submit" class="btn waves-effect" type="submit" name="action">Enviar</button>
            </div>
        </form> 
    </div>
</template>

<template name="category_options">
    <div style="position: relative;">
        <div class="fixed-action-btn horizontal click-to-toggle" style="position: absolute; display: inline-block; top: -10px">
            <a class="btn-floating btn-large waves-effect"><i class="large material-icons">more_vert</i></a>
            <ul>
              <li><a id="category" href="/category" class="btn-floating tooltipped light-blue darken-4" data-tooltip="Visualizar categorias"><i class="material-icons">reorder</i></a></li>
              <li><a id="deleted" href="/category/deleted" class="btn-floating tooltipped red" data-tooltip="Visualizar categorias deletadas"><i class="material-icons">delete</i></a></li>
              <li><a id="add" href="/category/new" class="btn-floating tooltipped green" data-tooltip="Adicionar nova categoria"><i class="material-icons">add</i></a></li>
          </ul>
      </div>
  </div>
</template>

<template name="login">
    <nav class="z-depth-0 transparent black-text">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="/" class="breadcrumb">Home</a>
                <a href="/login" class="breadcrumb">Login</a>
            </div>
        </div>
    </nav>
    <div class="row center-align">
        <div class="col s12 m4 offset-m1">
            <div class="row">
                <h5>Já possui cadastro? Faça login.</h5>
            </div>
            <form id="login-form" action="action">
                <div class="row left-align">                    
                    <div class="input-field col s12">
                        <input id="login_email" name="login_email" type="email" required>
                        <label for="login_email">Email</label>
                    </div>
                </div>
                <div class="row left-align">
                    <div class="input-field col s12">
                        <input id="login_password" name="login_password" type="password" required>
                        <label for="login_password">Senha</label>
                    </div>
                </div>
                <div class="row right-align">
                    <label>
                        <a class='pink-text' href='/ForgotPassword'>Esqueceu a senha?</a>
                    </label>
                </div>
                <div class="row">
                    <button id="login-button" class="btn waves-effect" type="submit" name="action">Entrar</button>
                </div>
            </form> 
        </div>
        <div class="col s12 m4 offset-m2">
            <div class="row">
                <h5>Não possui cadastro? Cadastre-se.</h5>
            </div>
            <form id="register-form" action="action">
                <div class="row left-align">                    
                    <div class="input-field col s12">
                        <label for="name">Nome</label>
                        <input id="name" name="name" type="text" required>
                    </div>
                </div>
                <div class="row left-align">                    
                    <div class="input-field col s12">
                        <input id="surname" name="surname" type="text" required>
                        <label for="account-surname">Sobrenome</label>
                    </div>
                </div>
                <div class="row left-align">                    
                    <div class="input-field col s12">
                        <input id="email" name="email" type="email" required>
                        <label for="email">Email</label>
                    </div>
                </div>
                <div class="row left-align">
                    <div class="input-field col s12">
                        <input id="password" name="password" type="password" required>
                        <label for="password">Senha</label>
                    </div>
                </div>
                <div class="row left-align">
                    <div class="input-field col s12">
                        <input id="confirm_password" name="confirm_password" type="password" required>
                        <label for="confirm_password">Confirmar senha</label>
                    </div>
                </div>
                <div class="row">
                    <button id="create-account" class="btn waves-effect" type="submit" name="action">Registrar</button>
                </div>
            </form> 
        </div>
    </div>
</template>

<template name="ForgotPassword">
    <nav class="z-depth-0 transparent black-text">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="/" class="breadcrumb">Home</a>
                <a href="/login" class="breadcrumb">Login</a>
                <a href="/ForgotPassword" class="breadcrumb">Esqueci a senha</a>
            </div>
        </div>
    </nav>
    <div class="row center-align">
        <div class="col s12 m4 offset-m4">
            <div class="row">
                <h5>Informe o seu email para a recuperação da senha.</h5>
            </div>
            <form id="forgot-form" action="/forgot" method="post">
                <div class="row left-align">                    
                    <div class="input-field col s12">
                        <input id="forgot_email" name="forgot_email" type="email" required>
                        <label for="forgot_email">Email</label>
                    </div>
                </div>
                <div class="row">
                    <button id="btn-submit" class="btn waves-effect" type="submit" name="action">Enviar</button>
                </div>
            </form> 
        </div>
    </div>
</template>

<template name="ResetPassword">
    {{#if resetPassword}}
    <nav class="z-depth-0 transparent black-text">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="/" class="breadcrumb">Home</a>
                <a href="/login" class="breadcrumb">Login</a>
                <a href="/ForgotPassword" class="breadcrumb">Esqueci a senha</a>
                <a href="/reset-password" class="breadcrumb">Nova senha</a>
            </div>
        </div>
    </nav>
    <div class="row center-align">
        <div class="col s12 m4 offset-m4">
            <div class="row">
            <h5>Crie uma nova senha.</h5>
            </div>
            <form id="reset-form" action="/reset-password" method="post">
                <div class="row left-align">                    
                    <div class="input-field col s12">
                        <input id="password" name="password" type="password" value="" required>
                        <label for="password">Nova senha</label>
                    </div>
                    <div class="input-field col s12">
                        <input id="confirm_password" name="confirm_password" type="password" value="" required>
                        <label for="confirm_password">Confirmar nova senha</label>
                    </div>
                </div>
                <div class="row">
                    <button id="btn-submit" class="btn waves-effect" type="submit" name="action">Enviar</button>
                </div>
            </form> 
        </div>
    </div>
    {{/if}}
</template>

<template name="report">
    <nav class="z-depth-0 transparent black-text">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="/" class="breadcrumb">Home</a>
                <a href="/report" class="breadcrumb">Relatórios</a>
            </div>
        </div>
    </nav>
    <div class="row">
        <h5>Relatórios</h5>
    </div>
    <table class="highlight bordered">
        <thead>
            <tr>
                <th data-field="id">Name</th>
                <th data-field="name">Item Name</th>
                <th data-field="price">Item Price</th>
            </tr>
        </thead>

        <tbody>
            <tr>
                <td>Alvin</td>
                <td>Eclair</td>
                <td>$0.87</td>
            </tr>
            <tr>
                <td>Alan</td>
                <td>Jellybean</td>
                <td>$3.76</td>
            </tr>
            <tr>
                <td>Jonathan</td>
                <td>Lollipop</td>
                <td>$7.00</td>
            </tr>
        </tbody>
    </table>
</template>

<template name="new_report">
    <nav class="z-depth-0 transparent black-text">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="/" class="breadcrumb">Home</a>
                <a href="/report" class="breadcrumb">Relatórios</a>
                <a href="/report/new" class="breadcrumb">Novo relatório</a>
            </div>
        </div>
    </nav>
    <div class="col s12 m12">
        <div class="row">
            <h5>Novo relatório</h5>
        </div>
        <form id="new_report" action="/report/new" method="post">
            <div class="row">                    
                <div class="input-field col s12 m6 l4">
                    <input id="name" name="name" type="email" required>
                    <label for="name">Nome do cliente ou empresa</label>
                </div>
                <div class="input-field col s12 m6 l4">
                    <input id="date" name="date" type="date" value="{{getDate}}" placeholder="" readonly>
                    <label class="active" for="date">Hora/data</label>
                </div>
                <div class="input-field col s12 m6 l4">
                    <select id="category">
                        {{#if category.count}}
                        <option value="" disabled selected>Escolha uma categoria</option>
                        {{#each category}}
                        <option value="{{_id}}">{{title}}</option>
                        {{/each}}
                        {{else}}
                        <option value="" disabled selected>Não existem categorias</option>
                        {{/if}}
                    </select>
                    <label>Categoria</label>
                </div>
            </div>
            <div class="row">
                <form class="col s12">
                    <div class="row">
                        <div class="input-field col s12">
                            <textarea id="description" class="materialize-textarea"></textarea>
                            <label id="label_description" for="description">Descrição</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="row">
                <button id="btn-submit" class="btn waves-effect" type="submit" name="action">Enviar</button>
            </div>
        </form> 
    </div>
</template>

<template name="user">
    <h1>User</h1>
</template>