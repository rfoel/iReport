<template name="report">
    <nav class="z-depth-0 transparent black-text">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="/" class="breadcrumb">Home</a>
                <a href="/report" class="breadcrumb">Relatórios</a>
            </div>
        </div>
    </nav>
    {{> report_options}}
    <div class="row">
        <h5>Relatórios</h5>
    </div>
    <table class="highlight bordered">
        {{#if report.count}}
        <thead>
            <tr>
                <th>Nome</th>
                <th>Hora/Data</th>
                <th>Categoria</th>
                <th>Ações</th>
            </tr>
        </thead>

        <tbody>
            {{#each report}}
            {{> report_item}}
            {{/each}}
        </tbody>
        {{else}}
        <h4 class="center-align grey-text">Você não tem relatórios :(</h4>
        {{/if}}  
    </table>
</template>

<template name="report_item">
    <tr id="{{_id}}">
        <td>{{name}}</td>
        <td>{{datetime}}</td>
        <td>{{getCategory category}}</td>
        <td class="actions">{{> report_actions}}</td>
    </tr>
</template>

<template name="report_deleted">
    <nav class="z-depth-0 transparent black-text">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="/" class="breadcrumb">Home</a>
                <a href="/report" class="breadcrumb">Relatórios</a>
                <a href="/report/deleted" class="breadcrumb">Relatórios removidos</a>
            </div>
        </div>
    </nav>
    {{> report_options}}
    <div class="row">
        <h5>Relatórios removidos</h5>
    </div>
    <table class="highlight bordered">
        {{#if report.count}}
        <thead>
            <tr>
                <th>Nome</th>
                <th>Hora/Data</th>
                <th>Categoria</th>
                <th>Ações</th>
            </tr>
        </thead>

        <tbody>
            {{#each report}}
            {{> report_item}}
            {{/each}}
        </tbody>
        {{else}}
        <h4 class="center-align grey-text">Você não tem relatórios removidos.</h4>
        {{/if}}  
    </table>
</template>

<template name="report_actions">
    <div class="right">
        <i id="view" class="material-icons tooltipped" data-tooltip="Visualizar relatório">visibility</i><i id="edit" class="material-icons tooltipped" data-tooltip="Editar relatório">edit</i><i id="restore" class="material-icons tooltipped" data-tooltip="Restaurar relatório">restore</i><i id="delete" class="material-icons tooltipped" data-tooltip="Apagar relatório">delete</i>
    </div>
</template>

<template name="report_options">
    <div class="option">
        <div class="fixed-action-btn horizontal click-to-toggle" style="position: absolute; display: inline-block;">
            <a class="btn-floating btn-large waves-effect"><i class="large material-icons">description</i></a>
            <ul>
                <li><a id="report" href="/report" class="btn-floating tooltipped light-blue darken-4" data-tooltip="Visualizar relatórios"><i class="material-icons">reorder</i></a></li>
                <li><a id="deleted" href="/report/deleted" class="btn-floating tooltipped red" data-tooltip="Visualizar relatórios deletados"><i class="material-icons">delete</i></a></li>
                <li><a id="add" href="/report/new" class="btn-floating tooltipped green" data-tooltip="Criar novo relatório"><i class="material-icons">add</i></a></li>
            </ul>
        </div>
    </div>
</template>

<template name="new_report">
    <nav class="z-depth-0 transparent black-text">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="/" class="breadcrumb">Home</a>
                <a href="/report" class="breadcrumb">Relatórios</a>
                <a href="/report/new" class="breadcrumb">Novo relatório</a>
            </div>
        </div>
    </nav>
    {{> report_options}}
    <div class="col s12 m12">
        <div class="row">
            <h5>Novo relatório</h5>
        </div>
        <form id="new-report">
            <div class="row">                    
                <div class="input-field col s12 m6 l4">
                    <input id="name" name="name" type="text">
                    <label for="name">Nome do cliente ou empresa</label>
                </div>
                <div class="input-field col s12 m6 l4">
                    <input id="date" name="date" type="text" value="{{getDate}}" readonly>
                    <label class="active" for="date">Hora/data</label>
                </div>
                <div class="input-field col s12 m6 l4">
                    <select id="category" name="category">
                        {{> category_items}}
                    </select>
                    <label>Categoria</label>
                </div>
            </div>
            <div class="row">
                <div class="col s12">
                    <div class="row">
                        <div class="input-field col s12">
                            <textarea id="description" name="description" class="materialize-textarea" type="text"></textarea>
                            <label for="description">Descrição</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <button id="btn-submit" class="btn waves-effect" type="submit">Enviar</button>
            </div>
        </form> 
    </div>
</template>

<template name="category_items">
    {{#if category.count}}
    <option value="" disabled selected>Escolha uma categoria</option>
    {{#each category}}
    <option value="{{_id}}">{{title}}</option>
    {{/each}}
    {{else}}
    <option value="" disabled selected>Não existem categorias</option>
    {{/if}}
</template>

<template name="edit_report">
    <nav class="z-depth-0 transparent black-text">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="/" class="breadcrumb">Home</a>
                <a href="/report" class="breadcrumb">Relatórios</a>
                <a href="/report/edit/{{report._id}}" class="breadcrumb">Editar relatório</a>
            </div>
        </div>
    </nav>
    {{> report_options}}
    <div class="col s12 m12">
        <div class="row">
            <h5>Editar relatório</h5>
        </div>
        <form id="edit-report">
            <div class="row">                    
                <div class="input-field col s12 m6 l4">
                    <input id="name" name="name" type="text" value="{{report.name}}">
                    <label class="active" for="name">Nome do cliente ou empresa</label>
                </div>
                <div class="input-field col s12 m6 l4">
                    <input id="date" name="date" type="text" value="{{report.datetime}}" readonly>
                    <label class="active" for="date">Hora/data</label>
                </div>
                <div class="input-field col s12 m6 l4">
                    <select id="category">
                        {{> category_items}}
                    </select>
                    <label>Categoria</label>
                </div>
            </div>
            <div class="row">
                <div class="col s12">
                    <div class="row">
                        <div class="input-field col s12">
                            <textarea id="description" class="materialize-textarea">{{report.description}}</textarea>
                            <label  class="active" id="label_description" for="description">Descrição</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <button id="btn-submit" class="btn waves-effect" type="submit">Enviar</button>
            </div>
        </form> 
    </div>
</template>

<template name="view_report">
    <nav class="z-depth-0 transparent black-text">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="/" class="breadcrumb">Home</a>
                <a href="/report" class="breadcrumb">Relatórios</a>
                <a href="/report/edit/{{report._id}}" class="breadcrumb">Visualizar relatório</a>
            </div>
        </div>
    </nav>
    {{> report_options}}
    <div class="col s12 m12">
        <div class="row">
            <h5>Visualizar relatório</h5>
        </div>
        <form id="view-report" action="/report/edit/{{report._id}}" method="post">
            <div class="row">  
                <input id="userId" type="hidden" value="{{report.createdBy}}">
                <div class="input-field col s12 m6 l4">
                    <input readonly id="name" name="name" type="text" value="{{report.name}}" required>
                    <label class="active" for="name">Nome do cliente ou empresa</label>
                </div>
                <div class="input-field col s12 m6 l4">
                    <input id="date" name="date" type="text" value="{{report.datetime}}" readonly>
                    <label class="active" for="date">Hora/data</label>
                </div>
                <div class="input-field col s12 m6 l4">
                    <select id="category" disabled>
                        {{> category_items}}
                    </select>
                    <label>Categoria</label>
                </div>
            </div>
            <div class="row">
                <form class="col s12">
                    <div class="row">
                        <div class="input-field col s12">
                            <textarea readonly id="description" class="materialize-textarea">{{report.description}}</textarea>
                            <label class="active" id="label_description" for="description">Descrição</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="row">
                <div class="col s12 m4">
                    <button id="back" class="btn waves-effect">Voltar</button>
                </div>
                <div class="col s12 m8">
                    <div class="right">
                        <button id="withDateAndUser" class="btn-floating btn-large waves-effect light-blue darken-4 tooltipped options" data-tooltip="Copiar com data e usuário"><i class="material-icons">perm_identity</i></button>
                        <button id="withDate" class="btn-floating btn-large waves-effect light-blue darken-4 tooltipped options" data-tooltip="Copiar com data"><i class="material-icons">schedule</i></button>
                        <button id="edit" class="btn-floating btn-large waves-effect green accent-4 options"><i class="material-icons">edit</i></button>
                        <button id="delete" class="btn-floating btn-large waves-effect pink accent-3 options"><i class="material-icons">delete</i></button>
                    </div>
                </div>
            </div>
        </form> 
    </div>
</template>